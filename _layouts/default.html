<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {% include head.html %}

  <body>

    {% include header.html %}

    <main class="page-content" aria-label="Content">
        {{ content }}
    </main>

    {% include footer.html %}

    {% include scripts.html %}

    {% include search-overlay.html %}


    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }

      console.log('need to send this to the table')
      document.addEventListener("DOMContentLoaded", function () {
        var iframe = document.getElementById('newtable'); // Replace with your iframe's ID
        var url = window.location.href; // Current URL of the Jekyll website

        // Check if iframe is loaded
        iframe.onload = function () {
          // iframe.contentWindow.postMessage(url, 'http://localhost:8080'); // Sends the URL to the iframe
          iframe.contentWindow.postMessage(url, 'https://indian-states-table.netlify.app/'); // Sends the URL to the iframe
        };
      });
    </script>
  </body>

</html>
