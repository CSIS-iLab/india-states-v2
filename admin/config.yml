# config.yml
local_backend: true
# local_backend:
#   # when using a custom proxy server port
#   url: http://localhost:4000/
#   # when accessing the local site from a host other than 'localhost' or '127.0.0.1'
#   allowed_hosts: ['192.168.0.1']

# live
backend:
    name: git-gateway
    branch: main # Branch to update (optional; defaults to master)

media_folder: '_site/uploads'
public_folder: '/uploads' # The src attribute for uploaded media will begin with /images/uploads
collections:
    - name: 'analysis'
      label: 'Analysis'
      folder: '_analysis/'
      create: true
      editor:
          preview: false
      slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      fields:
          - {
                label: 'Layout',
                name: 'layout',
                widget: 'hidden',
                default: 'analysis',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Publish Date', name: 'date', widget: 'datetime' }
          - {
                label: 'Author',
                name: 'author',
                widget: 'relation',
                collection: 'authors',
                multiple: true,
                display_fields: [display_name],
                search_fields: [display_name],
                value_field: 'name',
            }
          - { label: 'Body', name: 'body', widget: 'markdown' }
    - name: 'articles'
      label: 'Articles'
      label_singular: 'Article'
      folder: '_posts/'
      create: true
      editor:
          preview: false
      slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      fields:
          - {
                label: 'Layout',
                name: 'layout',
                widget: 'hidden',
                default: 'post',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Publish Date', name: 'date', widget: 'datetime' }
          - { label: 'Body', name: 'body', widget: 'markdown' }
    - name: 'authors'
      label: 'Authors'
      label_singular: 'Author'
      folder: '_authors/'
      create: true
      editor:
          preview: false
      fields:
          - { label: 'Layout', name: 'layout', widget: 'hidden', default: 'author' }
          - { label: 'Short Name', name: 'name', widget: 'string' }
          - { label: 'Display Name', name: 'display_name', widget: 'string' }
          - { label: 'Position', name: 'position', widget: 'string' }
          - { label: 'Image', name: 'image', widget: 'image', choose_url: false, required: false }
          - { label: 'Body', name: 'body', widget: 'markdown' }
    - name: 'national-goals'
      label: 'National Goals'
      label_singular: 'National Goal'
      folder: '_national-goals/'
      create: true
      slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      fields:
          - {
                label: 'Layout',
                name: 'layout',
                widget: 'hidden',
                default: 'national-goals',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Publish Date', name: 'date', widget: 'datetime' }
          - { label: 'Body', name: 'body', widget: 'markdown' }
