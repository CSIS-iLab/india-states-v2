# config.yml
local_backend: true
# local_backend:
#   # when using a custom proxy server port
#   url: http://localhost:4000/
#   # when accessing the local site from a host other than 'localhost' or '127.0.0.1'
#   allowed_hosts: ['192.168.0.1']

# live
backend:
    name: git-gateway
    branch: main # Branch to update (optional; defaults to master)

media_folder: '_site/uploads'
public_folder: '/uploads' # The src attribute for uploaded media will begin with /images/uploads
collections:
    - name: 'analysis'
      label: 'Analysis'
      folder: '_analysis/'
      create: true
      editor:
          preview: false
      slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      fields:
          - {
                label: 'Layout',
                name: 'layout',
                widget: 'hidden',
                default: 'analysis',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - {
                label: 'Publish Date',
                name: 'date',
                widget: 'datetime',
                date_format: 'DD.MM.YYYY',
                time_format: false,
                format: 'LLL',
            }
          - {
                label: 'Author',
                name: 'author',
                widget: 'relation',
                collection: 'authors',
                multiple: true,
                display_fields: [display_name],
                search_fields: [display_name],
                value_field: 'name',
            }
          - {
                label: 'Featured Image',
                name: 'feature_image',
                widget: 'image',
                choose_url: false,
                required: false,
            }
          - {
                label: 'Featured image credit',
                name: 'feature_image_credit',
                widget: 'text',
            }
          - { label: 'Tags', name: 'tags', widget: 'list', default: [] }
          - {
                label: 'Sectors',
                name: 'sector',
                widget: 'relation',
                collection: 'sectors',
                multiple: true,
                display_fields: [title],
                search_fields: [title],
                value_field: 'title',
            }
          - {
                label: 'Sub Sectors',
                name: 'subsector',
                widget: 'relation',
                collection: 'subsectors',
                multiple: true,
                display_fields: [title],
                search_fields: [title],
                value_field: 'title',
            }
          - { label: 'Body', name: 'body', widget: 'markdown' }

    - name: 'articles'
      label: 'Articles'
      label_singular: 'Article'
      folder: '_posts/'
      create: true
      editor:
          preview: false
      slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      fields:
          - {
                label: 'Layout',
                name: 'layout',
                widget: 'hidden',
                default: 'post',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Publish Date', name: 'date', widget: 'datetime' }
          - { label: 'Body', name: 'body', widget: 'markdown' }
    - name: 'authors'
      label: 'Authors'
      label_singular: 'Author'
      folder: '_authors/'
      create: true
      editor:
          preview: false
      fields:
          - {
                label: 'Layout',
                name: 'layout',
                widget: 'hidden',
                default: 'author',
            }
          - { label: 'Short Name', name: 'name', widget: 'string' }
          - { label: 'Display Name', name: 'display_name', widget: 'string' }
          - { label: 'Position', name: 'position', widget: 'string' }
          - {
                label: 'Image',
                name: 'image',
                widget: 'image',
                choose_url: false,
                required: false,
            }
          - { label: 'Body', name: 'body', widget: 'markdown' }
    - name: 'national-goals'
      label: 'National Goals'
      label_singular: 'National Goal'
      folder: '_national-goals/'
      create: true
      slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      fields:
          - {
                label: 'Layout',
                name: 'layout',
                widget: 'hidden',
                default: 'national-goals',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Publish Date', name: 'date', widget: 'datetime' }
          - { label: 'Body', name: 'body', widget: 'markdown' }

    - name: 'resources'
      label: 'Resources'
      label_singular: 'Resource'
      folder: '_resources/'
      create: true
      # slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      slug: '{{slug}}'
      editor:
          preview: false
      fields:
          - {
                label: 'Content Type',
                name: 'content_type',
                widget: 'hidden',
                default: 'resource',
            }
          - {
                label: 'Type',
                name: 'type',
                widget: 'select',
                allow_add: false,
                options:
                    [
                        'Archives',
                        'Electricity',
                        'Electric Mobility',
                        'Energy Transition',
                        'Health',
                        'State Clean Energy Goal Tracker',
                        'Technology',
                    ],
                default: ['Archives'],
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - {
                label: 'Link',
                name: 'link',
                widget: 'string',
                hint: 'https://example.com',
            }
          - { label: 'Author', name: 'author', widget: 'string' }
          - { label: 'Summary', name: 'summary', widget: 'text' }
          - {
                label: 'Publish Date',
                name: 'posted_on',
                widget: 'datetime',
                date_format: 'MM.YYYY',
                time_format: false,
                format: 'LLL',
            }

    - name: 'post_types'
      label: 'Post types'
      label_singular: 'Post type'
      folder: '_post-types/'
      create: true
      # slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
      slug: '{{slug}}'
      editor:
          preview: false
      fields:
          - { label: 'Title', name: 'title', widget: 'string' }
          - { label: 'Description', name: 'description', widget: 'text' }
          - {
                label: 'Featured Image',
                name: 'feature_image',
                widget: 'image',
                choose_url: false,
                required: false,
            }
          - {
                label: 'Featured image credit',
                name: 'feature_image_credit',
                widget: 'text',
            }

    - name: 'sectors'
      label: 'Sectors'
      label_singular: 'Sector'
      folder: '_sectors/'
      create: true
      slug: '{{slug}}'
      editor:
          preview: false
      fields:
          - {
                label: 'Content Type',
                name: 'content_type',
                widget: 'hidden',
                default: 'sector',
            }
          - {
                label: 'Breadcrumbs',
                name: 'breadcrumbs',
                widget: 'hidden',
                default: 'sector',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - {
                label: 'Featured Image',
                name: 'feature_image',
                widget: 'image',
                choose_url: false,
                required: false,
            }
          - { label: 'Body', name: 'body', widget: 'markdown' }

    - name: 'subsectors'
      label: 'Sub Sectors'
      label_singular: 'Sub Sector'
      folder: '_subsectors'
      create: true
      slug: '{{slug}}'
      editor:
          preview: false
      fields:
          - {
                label: 'Content Type',
                name: 'content_type',
                widget: 'hidden',
                default: 'subsector',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - {
                label: 'Sectors',
                name: 'sector',
                widget: 'relation',
                collection: 'sectors',
                display_fields: ['title'],
                search_fields: ['title'],
                value_field: 'title',
            }
          - { label: 'Body', name: 'body', widget: 'markdown' }

    - name: 'states'
      label: 'States'
      label_singular: 'State'
      folder: '_states'
      create: true
      slug: '{{slug}}'
      editor:
          preview: false
      fields:
          - {
                label: 'Content Type',
                name: 'content_type',
                widget: 'hidden',
                default: 'state',
            }
          - {
                label: 'Breadcrumbs',
                name: 'breadcrumbs',
                widget: 'hidden',
                default: 'states',
            }
          - { label: 'Title', name: 'title', widget: 'string' }
          - label: 'Featured Images'
            name: 'feature_images'
            widget: 'object'
            fields:
                - label: 'Primary'
                  name: 'primary'
                  widget: 'object'
                  fields:
                      - {
                            label: 'Image',
                            name: 'image',
                            widget: 'image',
                            choose_url: false,
                            required: false,
                        }
                      - { label: 'Credit', name: 'credit', widget: 'string' }
                - label: 'Secondary'
                  name: 'secondary'
                  widget: 'object'
                  fields:
                      - {
                            label: 'Image',
                            name: 'image',
                            widget: 'image',
                            choose_url: false,
                            required: false,
                        }
                      - { label: 'Credit', name: 'credit', widget: 'string' }
          - { label: 'Size', name: 'size', widget: 'string' }
          - { label: 'Population', name: 'population', widget: 'string' }
          - {
                label: 'Party affiliation',
                name: 'party_affiliation',
                widget: 'string',
            }
          - {
                label: 'Legislative seats',
                name: 'legislative_seats',
                widget: 'string',
            }
          - { label: 'Rajya seats', name: 'rajya_seats', widget: 'string' }
          - { label: 'Lok_seats', name: 'lok_seats', widget: 'string' }
          - { label: 'GDP', name: 'gdp', widget: 'string' }
          - { label: 'Body', name: 'body', widget: 'markdown' }
